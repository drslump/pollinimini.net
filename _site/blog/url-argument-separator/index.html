<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>URL argument separator | Pollinimini.net</title>
     
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Iván -DrSlump- Montes" />
    <meta name="description" content="DrSlump @ Pollinimini.net" />

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
     
    
    <link rel="stylesheet" href="/resources/global.css" type="text/css" />
    
     
    
  </head>
  <body>
    <!--[if lt IE 8]>
    <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox 3.5'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 8'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari 4'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
    </div>
    <![endif]-->

    <div id="header">

      <h1>
        <a href="/">Pollinimini.net</a>        
      </h1>

      <div>
          <h3>Are you any good with graphics? then please donate a banner for this site!</h3>
          <p>Upload an image sized 950x100 pixels.</p>
          <a id="upload">Upload</a>
      </div>
    </div>

    <ul id="navigation">
    
      <li>
        <a  href="/" >Blog</a>
        
      </li>
    
      <li>
        <a  href="/about/" >About</a>
        
          <ul>
          
            <li>
              <a  href="/portfolio/" >Portfolio</a>
            </li>
          
            <li>
              <a  href="mailto:drslump-at-pollinimini-dot-net" >Contact</a>
            </li>
          
          </ul>
        
      </li>
    
    </ul>
      
    <div id="body">
      <a name="content" class="hidden">Skip to content</a>
      <div id="sidebar">
        
            <p class="about">
    <a href="/about">
        <img src="/resources/meatduck.png" width="80" height="80" alt="Avatar" />
    </a>
    Hi, I'm Iván Montes, also known as DrSlump, a passionate web developer.
    You can follow me on <a href="/atom.xml">this blog</a>, fork me on 
    <a href="http://github.com/drslump">GitHub</a> and check out some of my
    work on my <a href="/portfolio">portfolio</a>.
</p>


        
      </div>

      <div id="content">
        

 
<div class="entry">
  <h2>
    
    <span>URL argument separator</span>
    
  </h2>
   
  <div class="entry-meta">
    Aug 11, 2006
    — Filled in Code
    
      and tagged as
      webdev and php
    

    <a class="entry-comments" href="/blog/url-argument-separator/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>Quite so often a web developer starts thinking what’s wrong with the guys who make the rules of how Internet works. And if we dig a bit in the problem, we can many times see that the ‘non-sense’ is there not because the specs were flawed but because the popular implementations didn’t follow completely the spec.</p>

<p>The ‘non-sense’ I’ve been thinking about lately is why the hell we use the ampersand <strong>&amp;</strong> to separate the arguments in a URL. My problem with using the <strong>&amp;</strong> as separator is that in todays world of XML crazyness, the ampersand must be handled with care. It seems that the specs said that any character could be used after the initial query char mark <strong>?</strong> but the <strong>#</strong> which marks the start of the fragment. Actually, in the current specs for URI/URL syntaxis they recommend the semicolon <strong>;</strong></p>

<p>So the decision to choose the ampersand as the defacto standard was taken by the guys who took the lead with the CGI scripts and the dynamic web content generation.</p>

<p>Since the specs recommend the use of the semicolon I thought “ok, no problem, I’ll just use it from now on” with a grin in my face. If you are thinking the same keep reading because it’s not that easy. My server-side language of choice right now is PHP, so I build up a simple test script to check out if the semicolon worked ok, but it didn’t. After consulting php.net for a bit more of information I found the solution, there are two ini directives which define the argument separators, one for input and the other for output (I guess this last one is used to manage the session id without cookies). <code>arg_separator.input</code> and <code>arg_separator.output</code> are the names of the directives. The first one takes a string as argument and every char in that string becomes an argument separator, the second one defines what will PHP use when building URLs as separator.</p>

<p>The bad news is that the default value is just the ampersand <strong>&amp;</strong>. The good news is that both directives can be defined per directory, so we can put them in our .htaccess in a shared host. If you control the host just edit the php.ini file. Logically we can’t modify them with ini_set() because the URL is already processed when our script starts execution (see below for a solution to this).</p>

<pre><code>php_value arg_separator.input &quot;&amp;;&quot;
php_value arg_separator.output &quot;;&quot;</code></pre>

<p>Note that I left both: the ampersand <strong>&amp;</strong> and the semicolor <strong>;</strong> as valid argument separators, I’m far too used to the ampersand and I don’t want to expend my whole life debugging an application just because I forgot that I decided that the semicolon was a better suit :)</p>

<p>Even if we can’t use the <code>ini_set()</code> function to modify the PHP behaviour for this, we can still make use of a different argument separator by processing the <code>$_GET</code> and <code>$_REQUEST</code> arrays and splitting them by our preffererd argument separator. The following code snippet show do it but please don’t use it in production environments, it’s probably flawed!</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// first join the PHP splitted arguments</span>
<span class='nv'>$get</span> <span class='o'>=</span> <span class='s1'>&#39;&#39;</span><span class='p'>;</span>
<span class='k'>foreach</span> <span class='p'>(</span><span class='nv'>$_GET</span> <span class='k'>as</span> <span class='nv'>$k</span><span class='o'>=&gt;</span><span class='nv'>$v</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='nv'>$get</span><span class='o'>.=</span> <span class='nv'>$k</span> <span class='o'>.</span> <span class='s1'>&#39;=&#39;</span> <span class='o'>.</span> <span class='nv'>$v</span> <span class='o'>.</span> <span class='s1'>&#39;;&#39;</span><span class='p'>;</span>
          <span class='c1'>// remove from the arrays, we&#39;ll add the correct ones later</span>
          <span class='nb'>unset</span><span class='p'>(</span><span class='nv'>$_GET</span><span class='p'>[</span><span class='nv'>$k</span><span class='p'>]);</span>
          <span class='nb'>unset</span><span class='p'>(</span><span class='nv'>$_REQUEST</span><span class='p'>[</span><span class='nv'>$k</span><span class='p'>]);</span>
<span class='p'>}</span>

<span class='c1'>// split the query string using our desired char</span>
<span class='nv'>$args</span> <span class='o'>=</span> <span class='nb'>split</span><span class='p'>(</span><span class='s1'>&#39;;&#39;</span><span class='p'>,</span> <span class='nv'>$get</span><span class='p'>);</span>
<span class='c1'>// process the query string and rebuild the _GET and _REQUEST array</span>
<span class='k'>foreach</span> <span class='p'>(</span><span class='nv'>$args</span> <span class='k'>as</span> <span class='nv'>$arg</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='c1'>// now separate the key from the value and assign them to the arrays</span>
          <span class='k'>list</span><span class='p'>(</span><span class='nv'>$k</span><span class='p'>,</span><span class='nv'>$v</span><span class='p'>)</span> <span class='o'>=</span> <span class='nb'>explode</span><span class='p'>(</span><span class='s1'>&#39;=&#39;</span><span class='p'>,</span> <span class='nv'>$arg</span><span class='p'>);</span>
          <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span> <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$k</span><span class='p'>))</span> <span class='p'>{</span>
              <span class='nv'>$_GET</span><span class='p'>[</span> <span class='nv'>$k</span> <span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$v</span><span class='p'>;</span>
              <span class='nv'>$_REQUEST</span><span class='p'>[</span> <span class='nv'>$k</span> <span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$v</span><span class='p'>;</span>
          <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>Changing the argument separator does not only help out when working with XML based technologies but also to give your site URLs a geeky look ;)</p>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 

<div id="comments">
  <div id="disqus_thread"></div>
  
  <script type="text/javascript">
    var disqus_developer = (/localhost|github|dev/i).test(location.host);
    
  </script>
  <script type="text/javascript" src="http://disqus.com/forums/pollinimini/embed.js"></script>
   
  <noscript>
    <a href="http://pollinimini.disqus.com/?url=ref">View the discussion thread.</a>
  </noscript>
</div>

      </div>       
    </div>
     
    <div id="footer">
      <div id="about">
        
        <p>Content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/">Creative Commons Attribution 2.5</a> unless stated otherwise.
</p>
        
        <p>The opinions of authors expressed herein are those of the author and do not necessarily state or reflect those of the site owner.
</p>
        
      </div>
      <div id="copyright">
        
        <p>&copy; Copyright 2004-2010 Iván -DrSlump- Montes</p>
        
        <p>Design based on <a href="http://dezinerfolio.com/demo/darkelegance">Dark Elegance</a> by <a href="http://dezinerfolio.com">Dezinerfolio</a>
</p>
        
        <p>Published with <a href="http://jekyllrb.com">Jekyll</a></p>
        
      </div>
    </div>
     
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    
     
    

    <script type="text/javascript" src="/resources/AjaxUpload.js"></script>
    <script type="text/javascript">
        new AjaxUpload('upload', {
          // Location of the server-side upload script
          action: 'upload.php',
          // File upload name
          name: 'logofile',
          // Submit file after selection
          autoSubmit: true,
          // Fired before the file is uploaded
          onSubmit: function(file, extension) {
            if (!extension || !/^(gif|png|jpe?g)$/i.test(extension)) {
              alert('Error: invalid file extension');
              return false;
            }
          },
          // Fired when file upload is completed
          // WARNING! DO NOT USE "FALSE" STRING AS A RESPONSE!
          // @param file basename of uploaded file
          // @param response server response
          onComplete: function(file, response) {
            if (response) {
              alert('Error uploading image. Please try again.');
            } else {
              $('#header').empty().each(function(){
                this.style.background = 'url("/uploads/' + file + '") no-repeat center top';
              });
            }
          }
        });
    </script>


    <!-- Disqus number of comments -->
    <script type="text/javascript" defer="defer">
      (function(){
        var links = document.getElementsByTagName('a');
        var query = '?';
        for (var i=0; i<links.length; i++){
          if (links[i].href.indexOf('#disqus_thread') >= 0){
            query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
        }
        document.write('<script defer="defer" charset="utf-8" type="text/javascript" src="http://disqus.com/forums/pollinimini/get_num_replies.js' + query + '"></' + 'script>');
      })();
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-580032-2");
      pageTracker._trackPageview();
    } catch(err) {}
    </script>
    
  </body>
</html>
