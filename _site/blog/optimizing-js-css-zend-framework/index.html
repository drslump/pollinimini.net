<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Optimizing Javascript and CSS downloads with Zend Framework | Pollinimini.net</title>
     
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Iván -DrSlump- Montes" />
    <meta name="description" content="DrSlump @ Pollinimini.net" />

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
     
    
    <link rel="stylesheet" href="/resources/global.css" type="text/css" />
    
     
    
  </head>
  <body>
    <!--[if lt IE 8]>
    <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox 3.5'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 8'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari 4'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
    </div>
    <![endif]-->

    <div id="header">
      <h1>
        <a href="/">Pollinimini.net</a>        
      </h1>
    </div>

    <ul id="navigation">
    
      <li>
        <a  href="/" >Blog</a>
        
      </li>
    
      <li>
        <a  href="/about/" >About</a>
        
          <ul>
          
            <li>
              <a  href="/portfolio/" >Portfolio</a>
            </li>
          
            <li>
              <a  href="mailto:drslump-at-pollinimini-dot-net" >Contact</a>
            </li>
          
          </ul>
        
      </li>
    
    </ul>
      
    <div id="body">
      <a name="content" class="hidden">Skip to content</a>
      <div id="sidebar">
        
            <p class="about">
    <a href="/about">
        <img src="/resources/meatduck.png" width="80" height="80" alt="Avatar" />
    </a>
    Hi, I'm Iván Montes, also known as DrSlump, a passionate web developer.
    You can follow me on <a href="/atom.xml">this blog</a>, fork me on 
    <a href="http://github.com/drslump">GitHub</a> and check out some of my
    work on my <a href="/portfolio">portfolio</a>.
</p>

<a class="twitter-timeline" data-dnt="true" href="https://twitter.com/DrSlump" data-widget-id="399685000380952576">Tweets by @DrSlump</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        
      </div>

      <div id="content">
        

 
<div class="entry">
  <h2>
    
    <span>Optimizing Javascript and CSS downloads with Zend Framework</span>
    
  </h2>
   
  <div class="entry-meta">
    Aug 27, 2009
    — Filled in Code
    
      and tagged as
      zf, php, scale, webdev, zend, javascript, and css
    

    <a class="entry-comments" href="/blog/optimizing-js-css-zend-framework/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>Modern web sites and applications require the use of many javascript and css files. If not done with care this can affect the user&#8217;s experience. One of the easiest methods to improve the performance is by concatenating and minimizing the individual files into <em>bundles</em>, reducing this way the number of downloads and the total size to be downloaded.</p>

<p>One problem with this approach though is that during development phases it&#8217;s important to work with the original source files, so it&#8217;s easier to debug or perform changes in them. From the developer&#8217;s point of view it&#8217;s ideal to work with small files.</p>

<p>Zend Framework offers an interesting way to include external javascript and css files in your pages. The <code>headLink</code> and <code>headScript</code> view helpers allow to include files in the page at any point in the execution which will be finally added to the head section of your layout just before sending the page to the browser. Since all the files are actually added to page at the end of the request we can override those helpers and filter their contents to replace the individual files with our bundles.</p>

<p>Fortunately, both helpers implement the Iterator interface, which means that&#8217;s very easy to attach a filter mechanism to them. First thing we need is a filtering iterator as shown here:</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='sd'>/** vim: ff=unix fenc=utf8 tw=80 ts=4 sw=4 et ai</span>
<span class='sd'> *</span>
<span class='sd'> * Implements a filter iterator designed to modify the default behaviour of Zend</span>
<span class='sd'> * view helpers HeadLink and HeadScript to support the runtime replacement</span>
<span class='sd'> * of individual javascript and css files for its corresponding bundles.</span>
<span class='sd'> *</span>
<span class='sd'> * License</span>
<span class='sd'> *</span>
<span class='sd'> * Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class='sd'> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class='sd'> * in the Software without restriction, including without limitation the rights</span>
<span class='sd'> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class='sd'> * copies of the Software, and to permit persons to whom the Software is</span>
<span class='sd'> * furnished to do so, subject to the following conditions:</span>
<span class='sd'> *</span>
<span class='sd'> * The above copyright notice and this permission notice shall be included in</span>
<span class='sd'> * all copies or substantial portions of the Software.</span>
<span class='sd'> *</span>
<span class='sd'> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class='sd'> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class='sd'> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class='sd'> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class='sd'> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class='sd'> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class='sd'> * THE SOFTWARE.</span>
<span class='sd'> *</span>
<span class='sd'> * @copyright   Copyright (c) 2009 Iván Montes</span>
<span class='sd'> * @author      Iván -DrSlump- Montes &lt;drslump@pollinimini.net&gt;</span>
<span class='sd'> */</span>
<span class='k'>class</span> <span class='nc'>BundlesFilterIterator</span> <span class='k'>extends</span> <span class='nx'>FilterIterator</span>
<span class='p'>{</span>
    <span class='sd'>/** @var array */</span>
    <span class='k'>protected</span> <span class='nv'>$_files</span> <span class='o'>=</span> <span class='k'>array</span><span class='p'>();</span>
    <span class='sd'>/** @var array */</span>
    <span class='k'>protected</span> <span class='nv'>$_included</span> <span class='o'>=</span> <span class='k'>array</span><span class='p'>();</span>

    <span class='sd'>/**</span>
<span class='sd'>     * Constructor</span>
<span class='sd'>     *</span>
<span class='sd'>     * @param Iterator $iterator</span>
<span class='sd'>     * @param array $bundles</span>
<span class='sd'>     */</span>
    <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>__construct</span><span class='p'>(</span><span class='nv'>$iterator</span><span class='p'>,</span> <span class='nv'>$bundles</span><span class='p'>)</span>
    <span class='p'>{</span>
        <span class='c1'>// Reverses the array placing the individual files as keys and the</span>
        <span class='c1'>// bundle files as values</span>
        <span class='k'>foreach</span> <span class='p'>(</span> <span class='nv'>$bundles</span> <span class='k'>as</span> <span class='nv'>$bundle</span> <span class='o'>=&gt;</span> <span class='nv'>$files</span> <span class='p'>)</span> <span class='p'>{</span>
            <span class='k'>foreach</span> <span class='p'>(</span><span class='nv'>$files</span> <span class='k'>as</span> <span class='nv'>$file</span><span class='p'>)</span> <span class='p'>{</span>
                <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>_files</span><span class='p'>[</span><span class='nv'>$file</span><span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$bundle</span><span class='p'>;</span>
            <span class='p'>}</span>
        <span class='p'>}</span>

        <span class='k'>parent</span><span class='o'>::</span><span class='na'>__construct</span><span class='p'>(</span><span class='nv'>$iterator</span><span class='p'>);</span>
    <span class='p'>}</span>

    <span class='sd'>/**</span>
<span class='sd'>     * Performs the filtering</span>
<span class='sd'>     *</span>
<span class='sd'>     * @return bool</span>
<span class='sd'>     */</span>
    <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>accept</span><span class='p'>()</span>
    <span class='p'>{</span>
        <span class='c1'>// Get the current item</span>
        <span class='nv'>$item</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>getInnerIterator</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>current</span><span class='p'>();</span>

        <span class='c1'>// Check if it is an external javascript or css file</span>
        <span class='nv'>$type</span> <span class='o'>=</span> <span class='s1'>&#39;js&#39;</span><span class='p'>;</span>
        <span class='nv'>$src</span> <span class='o'>=</span> <span class='nb'>isset</span><span class='p'>(</span><span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;src&#39;</span><span class='p'>])</span> <span class='o'>?</span> <span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;src&#39;</span><span class='p'>]</span> <span class='o'>:</span> <span class='k'>null</span><span class='p'>;</span>
        <span class='k'>if</span> <span class='p'>(</span><span class='k'>empty</span><span class='p'>(</span><span class='nv'>$src</span><span class='p'>))</span> <span class='p'>{</span>
            <span class='nv'>$type</span> <span class='o'>=</span> <span class='s1'>&#39;css&#39;</span><span class='p'>;</span>
            <span class='nv'>$src</span> <span class='o'>=</span> <span class='nb'>isset</span><span class='p'>(</span><span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>href</span><span class='p'>)</span> <span class='o'>?</span> <span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>href</span> <span class='o'>:</span> <span class='k'>null</span><span class='p'>;</span>
        <span class='p'>}</span>

        <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span><span class='k'>empty</span><span class='p'>(</span><span class='nv'>$src</span><span class='p'>)</span> <span class='o'>&amp;&amp;</span>
            <span class='c1'>// The individual file is in a bundle</span>
            <span class='nb'>isset</span><span class='p'>(</span><span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>_files</span><span class='p'>[</span><span class='nv'>$src</span><span class='p'>])</span> <span class='o'>&amp;&amp;</span>
            <span class='c1'>// Check if it is a normal include</span>
            <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;defer&#39;</span><span class='p'>])</span> <span class='o'>&amp;&amp;</span>
            <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;conditional&#39;</span><span class='p'>])</span> <span class='o'>&amp;&amp;</span>
            <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;conditionalStylesheet&#39;</span><span class='p'>]))</span> <span class='p'>{</span>

            <span class='c1'>// Get the bundle file</span>
            <span class='nv'>$bundle</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>_files</span><span class='p'>[</span><span class='nv'>$src</span><span class='p'>];</span>

            <span class='c1'>// If its bundle was not yet included do so now</span>
            <span class='c1'>// The HeadXXXX helpers will also check for this but still...</span>
            <span class='k'>if</span> <span class='p'>(</span><span class='k'>empty</span><span class='p'>(</span><span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>_included</span><span class='p'>[</span><span class='nv'>$bundle</span><span class='p'>]))</span> <span class='p'>{</span>
                <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>_included</span><span class='p'>[</span><span class='nv'>$bundle</span><span class='p'>]</span> <span class='o'>=</span> <span class='k'>true</span><span class='p'>;</span>
                <span class='k'>if</span> <span class='p'>(</span><span class='nv'>$type</span> <span class='o'>===</span> <span class='s1'>&#39;js&#39;</span><span class='p'>)</span> <span class='p'>{</span>
                        <span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>attributes</span><span class='p'>[</span><span class='s1'>&#39;src&#39;</span><span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$bundle</span><span class='p'>;</span>
                <span class='p'>}</span> <span class='k'>else</span> <span class='p'>{</span>
                        <span class='nv'>$item</span><span class='o'>-&gt;</span><span class='na'>href</span> <span class='o'>=</span> <span class='nv'>$bundle</span><span class='p'>;</span>
                <span class='p'>}</span>
                <span class='k'>return</span> <span class='k'>true</span><span class='p'>;</span>
            <span class='p'>}</span>

            <span class='c1'>// Otherwise we do nothing with this item</span>
            <span class='k'>return</span> <span class='k'>false</span><span class='p'>;</span>
        <span class='p'>}</span>

        <span class='k'>return</span> <span class='k'>true</span><span class='p'>;</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>Now we need to override the view helpers to add the filtering iterator</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>class</span> <span class='nc'>DrSlump_View_Helper_HeadLink</span> <span class='k'>extends</span> <span class='nx'>Zend_View_Helper_HeadLink</span> <span class='p'>{</span>
    <span class='sd'>/**</span>
<span class='sd'>     * Override the default iterator with a filtering one</span>
<span class='sd'>     *</span>
<span class='sd'>     * @return BundlesFilterIterator</span>
<span class='sd'>     */</span>
    <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>getIterator</span><span class='p'>()</span>
    <span class='p'>{</span>
        <span class='nv'>$iterator</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>getContainer</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>getIterator</span><span class='p'>();</span>
        <span class='nv'>$bundles</span> <span class='o'>=</span> <span class='nx'>Zend_Registry</span><span class='o'>::</span><span class='na'>get</span><span class='p'>(</span><span class='s1'>&#39;bundles&#39;</span><span class='p'>);</span>

        <span class='k'>return</span> <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$bundles</span><span class='p'>)</span> <span class='o'>?</span> <span class='nv'>$iterator</span> <span class='o'>:</span> <span class='k'>new</span> <span class='nx'>BundlesFilterIterator</span><span class='p'>(</span> <span class='nv'>$iterator</span><span class='p'>,</span> <span class='nv'>$bundles</span> <span class='p'>);</span>
    <span class='p'>}</span>
<span class='p'>}</span>

<span class='k'>class</span> <span class='nc'>DrSlump_View_Helper_HeadScript</span> <span class='k'>extends</span> <span class='nx'>Zend_View_Helper_HeadScript</span> <span class='p'>{</span>
        <span class='sd'>/**</span>
<span class='sd'>         * Override the default iterator with a filtering one</span>
<span class='sd'>         *</span>
<span class='sd'>         * @return BundlesFilterIterator</span>
<span class='sd'>         */</span>
        <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>getIterator</span><span class='p'>()</span>
        <span class='p'>{</span>
                <span class='nv'>$iterator</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>getContainer</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>getIterator</span><span class='p'>();</span>
                <span class='nv'>$bundles</span> <span class='o'>=</span> <span class='nx'>Zend_Registry</span><span class='o'>::</span><span class='na'>get</span><span class='p'>(</span><span class='s1'>&#39;bundles&#39;</span><span class='p'>);</span>
 
                <span class='k'>return</span> <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$bundles</span><span class='p'>)</span> <span class='o'>?</span> <span class='nv'>$iterator</span> <span class='o'>:</span> <span class='k'>new</span> <span class='nx'>BundlesFilterIterator</span><span class='p'>(</span> <span class='nv'>$iterator</span><span class='p'>,</span> <span class='nv'>$bundles</span> <span class='p'>);</span>
        <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>Now we just need to map our small individual files with the bundle files in which they are contained:</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='nv'>$bundles</span> <span class='o'>=</span> <span class='k'>array</span><span class='p'>(</span>
    <span class='c1'>// For jQuery we use a public CDN</span>
    <span class='s1'>&#39;http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js&#39;</span> <span class='o'>=&gt;</span> <span class='k'>array</span><span class='p'>(</span>
        <span class='s1'>&#39;/js/jquery-1.3.2.js&#39;</span>
    <span class='p'>),</span>
    <span class='s1'>&#39;/resources/bundle-plugins.js&#39;</span> <span class='o'>=&gt;</span> <span class='k'>array</span><span class='p'>(</span>
        <span class='s1'>&#39;/js/jquery/jquery.event.drag.js&#39;</span><span class='p'>,</span>
        <span class='s1'>&#39;/js/jquery/password_strength_plugin.js&#39;</span>
    <span class='p'>),</span>
    <span class='s1'>&#39;/resources/bundle.css&#39;</span> <span class='o'>=&gt;</span> <span class='k'>array</span><span class='p'>(</span>
        <span class='s1'>&#39;/css/reset.css&#39;</span><span class='p'>,</span>
        <span class='s1'>&#39;/css/global.css&#39;</span><span class='p'>,</span>
        <span class='s1'>&#39;/css/forms.css&#39;</span>
    <span class='p'>)</span>
<span class='p'>);</span>

<span class='c1'>// Store the bundles configuration in the registry so that it can be fetched by the view helpers</span>
<span class='nx'>Zend_Registry</span><span class='o'>::</span><span class='na'>set</span><span class='p'>(</span><span class='s1'>&#39;bundles&#39;</span><span class='p'>,</span> <span class='nv'>$bundles</span><span class='p'>);</span>
</code></pre></div>
<p>When defining the bundles mapping we&#8217;re assigning the bundle URL as key to an array of the individual files URLs we&#8217;re using in the code.</p>

<blockquote>
<p>Note: This code does <strong>NOT</strong> create the bundles. There are several tools available for that task. The purpose of the examples above is to show how to use those bundles in an application without having to think about them when coding or even apply them to an existing application without having to modify the source code.</p>
</blockquote>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 

<div id="comments">
  <div id="disqus_thread"></div>
  
  <script type="text/javascript">
    var disqus_developer = (/localhost|github|dev/i).test(location.host);
    
  </script>
  <script type="text/javascript" src="http://disqus.com/forums/pollinimini/embed.js"></script>
   
  <noscript>
    <a href="http://pollinimini.disqus.com/?url=ref">View the discussion thread.</a>
  </noscript>
</div>

      </div>       
    </div>
     
    <div id="footer">
      <div id="about">
        
        <p>Content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/">Creative Commons Attribution 2.5</a> unless stated otherwise.
</p>
        
        <p>The opinions of authors expressed herein are those of the author and do not necessarily state or reflect those of the site owner.
</p>
        
      </div>
      <div id="copyright">
        
        <p>&copy; Copyright 2004-2010 Iván -DrSlump- Montes</p>
        
        <p>Design based on <a href="http://dezinerfolio.com/demo/darkelegance">Dark Elegance</a> by <a href="http://dezinerfolio.com">Dezinerfolio</a>
</p>
        
        <p>Published with <a href="http://jekyllrb.com">Jekyll</a></p>
        
      </div>
    </div>
     
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    
     
    

    <!-- Disqus number of comments -->
    <script type="text/javascript" defer="defer">
      (function(){
        var links = document.getElementsByTagName('a');
        var query = '?';
        for (var i=0; i<links.length; i++){
          if (links[i].href.indexOf('#disqus_thread') >= 0){
            query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
        }
        document.write('<script defer="defer" charset="utf-8" type="text/javascript" src="http://disqus.com/forums/pollinimini/get_num_replies.js' + query + '"></' + 'script>');
      })();
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-580032-2");
      pageTracker._trackPageview();
    } catch(err) {}
    </script>
    
  </body>
</html>
