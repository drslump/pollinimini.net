<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Pollinimini.net</title>
     
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Iván -DrSlump- Montes" />
    <meta name="description" content="DrSlump @ Pollinimini.net" />

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
     
    
    <link rel="stylesheet" href="/resources/global.css" type="text/css" />
    
     
    
  </head>
  <body>
    <!--[if lt IE 8]>
    <div style='border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;'>
    <div style='position: absolute; right: 3px; top: 3px; font-family: courier new; font-weight: bold;'><a href='#' onclick='javascript:this.parentNode.parentNode.style.display="none"; return false;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-cornerx.jpg' style='border: none;' alt='Close this notice'/></a></div>
    <div style='width: 640px; margin: 0 auto; text-align: left; padding: 0; overflow: hidden; color: black;'>
      <div style='width: 75px; float: left;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-warning.jpg' alt='Warning!'/></div>
      <div style='width: 275px; float: left; font-family: Arial, sans-serif;'>
        <div style='font-size: 14px; font-weight: bold; margin-top: 12px;'>You are using an outdated browser</div>
        <div style='font-size: 12px; margin-top: 6px; line-height: 12px;'>For a better experience using this site, please upgrade to a modern web browser.</div>
      </div>
      <div style='width: 75px; float: left;'><a href='http://www.firefox.com' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox 3.5'/></a></div>
      <div style='width: 75px; float: left;'><a href='http://www.browserforthebetter.com/download.html' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 8'/></a></div>
      <div style='width: 73px; float: left;'><a href='http://www.apple.com/safari/download/' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari 4'/></a></div>
      <div style='float: left;'><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div>
    </div>
    </div>
    <![endif]-->

    <div id="header">

      <h1>
        <a href="/">Pollinimini.net</a>        
      </h1>

      <div>
          <h3>Are you any good with graphics? then please donate a banner for this site!</h3>
          <p>Upload an image sized 950x100 pixels.</p>
          <a id="upload">Upload</a>
      </div>
    </div>

    <ul id="navigation">
    
      <li>
        <a  href="/" >Blog</a>
        
      </li>
    
      <li>
        <a  href="/about/" >About</a>
        
          <ul>
          
            <li>
              <a  href="/portfolio/" >Portfolio</a>
            </li>
          
            <li>
              <a  href="mailto:drslump-at-pollinimini-dot-net" >Contact</a>
            </li>
          
          </ul>
        
      </li>
    
    </ul>
      
    <div id="body">
      <a name="content" class="hidden">Skip to content</a>
      <div id="sidebar">
        
            <p class="about">
    <a href="/about">
        <img src="/resources/meatduck.png" width="80" height="80" alt="Avatar" />
    </a>
    Hi, I'm Iván Montes, also known as DrSlump, a passionate web developer.
    You can follow me on <a href="/atom.xml">this blog</a>, fork me on 
    <a href="http://github.com/drslump">GitHub</a> and check out some of my
    work on my <a href="/portfolio">portfolio</a>.
</p>


        
      </div>

      <div id="content">
        
  <div class="entry">
  <h2>
    
    <a href="/blog/introducing-flv4php">Introducing FLV4PHP</a>
    
  </h2>
   
  <div class="entry-meta">
    Sep 11, 2006
    — Filled in Code
    
      and tagged as
      webdev, php, flv, and flash
    

    <a class="entry-comments" href="/blog/introducing-flv4php/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>This weekend I found some time to work in a new project. In the last post I wrote about streaming video for Flash players, I went thru some different options for that task and one of them was the HTTP progressive download of FLV files.</p>

<p>There is an interesting idea to make seeking possible when using a simple HTTP download (I think Google Video does just this), it has been already <a href='http://www.flashcomguru.com/index.cfm/2005/11/2/Streaming-flv-video-via-PHP-take-two'>mentioned</a> in a <a href='http://xprojects.co.uk/modules/news/article.php?storyid=5'>few</a> <a href='http://flashforever.homeip.net/blog/?p=16'>places</a>.</p>

<p>There are some tools already which can inject the needed metadata into an flv file, namely, <a href='http://www.inlet-media.de/flvtool2'>FLVTool2</a> and <a href='http://www.buraks.com/flvmdi/'>flvmdi</a>. The <a href='http://ffmpeg.mplayerhq.hu/'>ffmpeg</a> project can create FLV files and there seem to be already patches to support the creation of metadata entries too.</p>

<p>Over the years I’ve come to love to develop readers for obscure (not standard neither well documented) file formats, it’s quite a challenge to do it but since the file format spec is not public you have a very good excuse when bugs are found :)</p>

<p>So I’ve started to work on a system to serve video (and also audio only) files to Flash based players with support for seeking. The idea is to just limit ourselves to use PHP and Flash technologies, no shell scripts or compiled programs, since they are difficult to get running on most shared hosts.</p>

<p>Right now the FLV analyzing library is finnished and the sample metadata extraction tool can process a 140Mb FLV in just 1.3 seconds on my cheap DreamHost test system.</p>

<p>So take a look at the project page, right now I’m looking for an Action Script guru to help out with the development of the player. I’ve tried to get my brains around Flash but I haven’t got much success :(</p>

<p>By the way, all this work will be used for an upcoming project I’m planning. Am I the only one who think that current web photo gallery systems suck?</p>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 

  <div class="entry">
  <h2>
    
    <a href="/blog/url-argument-separator">URL argument separator</a>
    
  </h2>
   
  <div class="entry-meta">
    Aug 11, 2006
    — Filled in Code
    
      and tagged as
      webdev and php
    

    <a class="entry-comments" href="/blog/url-argument-separator/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>Quite so often a web developer starts thinking what’s wrong with the guys who make the rules of how Internet works. And if we dig a bit in the problem, we can many times see that the ‘non-sense’ is there not because the specs were flawed but because the popular implementations didn’t follow completely the spec.</p>

<p>The ‘non-sense’ I’ve been thinking about lately is why the hell we use the ampersand <strong>&amp;</strong> to separate the arguments in a URL. My problem with using the <strong>&amp;</strong> as separator is that in todays world of XML crazyness, the ampersand must be handled with care. It seems that the specs said that any character could be used after the initial query char mark <strong>?</strong> but the <strong>#</strong> which marks the start of the fragment. Actually, in the current specs for URI/URL syntaxis they recommend the semicolon <strong>;</strong></p>

<p>So the decision to choose the ampersand as the defacto standard was taken by the guys who took the lead with the CGI scripts and the dynamic web content generation.</p>

<p>Since the specs recommend the use of the semicolon I thought “ok, no problem, I’ll just use it from now on” with a grin in my face. If you are thinking the same keep reading because it’s not that easy. My server-side language of choice right now is PHP, so I build up a simple test script to check out if the semicolon worked ok, but it didn’t. After consulting php.net for a bit more of information I found the solution, there are two ini directives which define the argument separators, one for input and the other for output (I guess this last one is used to manage the session id without cookies). <code>arg_separator.input</code> and <code>arg_separator.output</code> are the names of the directives. The first one takes a string as argument and every char in that string becomes an argument separator, the second one defines what will PHP use when building URLs as separator.</p>

<p>The bad news is that the default value is just the ampersand <strong>&amp;</strong>. The good news is that both directives can be defined per directory, so we can put them in our .htaccess in a shared host. If you control the host just edit the php.ini file. Logically we can’t modify them with ini_set() because the URL is already processed when our script starts execution (see below for a solution to this).</p>

<pre><code>php_value arg_separator.input &quot;&amp;;&quot;
php_value arg_separator.output &quot;;&quot;</code></pre>

<p>Note that I left both: the ampersand <strong>&amp;</strong> and the semicolor <strong>;</strong> as valid argument separators, I’m far too used to the ampersand and I don’t want to expend my whole life debugging an application just because I forgot that I decided that the semicolon was a better suit :)</p>

<p>Even if we can’t use the <code>ini_set()</code> function to modify the PHP behaviour for this, we can still make use of a different argument separator by processing the <code>$_GET</code> and <code>$_REQUEST</code> arrays and splitting them by our preffererd argument separator. The following code snippet show do it but please don’t use it in production environments, it’s probably flawed!</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// first join the PHP splitted arguments</span>
<span class='nv'>$get</span> <span class='o'>=</span> <span class='s1'>&#39;&#39;</span><span class='p'>;</span>
<span class='k'>foreach</span> <span class='p'>(</span><span class='nv'>$_GET</span> <span class='k'>as</span> <span class='nv'>$k</span><span class='o'>=&gt;</span><span class='nv'>$v</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='nv'>$get</span><span class='o'>.=</span> <span class='nv'>$k</span> <span class='o'>.</span> <span class='s1'>&#39;=&#39;</span> <span class='o'>.</span> <span class='nv'>$v</span> <span class='o'>.</span> <span class='s1'>&#39;;&#39;</span><span class='p'>;</span>
          <span class='c1'>// remove from the arrays, we&#39;ll add the correct ones later</span>
          <span class='nb'>unset</span><span class='p'>(</span><span class='nv'>$_GET</span><span class='p'>[</span><span class='nv'>$k</span><span class='p'>]);</span>
          <span class='nb'>unset</span><span class='p'>(</span><span class='nv'>$_REQUEST</span><span class='p'>[</span><span class='nv'>$k</span><span class='p'>]);</span>
<span class='p'>}</span>

<span class='c1'>// split the query string using our desired char</span>
<span class='nv'>$args</span> <span class='o'>=</span> <span class='nb'>split</span><span class='p'>(</span><span class='s1'>&#39;;&#39;</span><span class='p'>,</span> <span class='nv'>$get</span><span class='p'>);</span>
<span class='c1'>// process the query string and rebuild the _GET and _REQUEST array</span>
<span class='k'>foreach</span> <span class='p'>(</span><span class='nv'>$args</span> <span class='k'>as</span> <span class='nv'>$arg</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='c1'>// now separate the key from the value and assign them to the arrays</span>
          <span class='k'>list</span><span class='p'>(</span><span class='nv'>$k</span><span class='p'>,</span><span class='nv'>$v</span><span class='p'>)</span> <span class='o'>=</span> <span class='nb'>explode</span><span class='p'>(</span><span class='s1'>&#39;=&#39;</span><span class='p'>,</span> <span class='nv'>$arg</span><span class='p'>);</span>
          <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span> <span class='k'>empty</span><span class='p'>(</span><span class='nv'>$k</span><span class='p'>))</span> <span class='p'>{</span>
              <span class='nv'>$_GET</span><span class='p'>[</span> <span class='nv'>$k</span> <span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$v</span><span class='p'>;</span>
              <span class='nv'>$_REQUEST</span><span class='p'>[</span> <span class='nv'>$k</span> <span class='p'>]</span> <span class='o'>=</span> <span class='nv'>$v</span><span class='p'>;</span>
          <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p>Changing the argument separator does not only help out when working with XML based technologies but also to give your site URLs a geeky look ;)</p>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 

  <div class="entry">
  <h2>
    
    <a href="/blog/ajax-you-will-need-transactions">Doing Ajax? you'll need transactions!</a>
    
  </h2>
   
  <div class="entry-meta">
    Jul 10, 2006
    — Filled in Code
    
      and tagged as
      webdev and javascript
    

    <a class="entry-comments" href="/blog/ajax-you-will-need-transactions/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>In an embarrassing attempt to bring some more visits to this blog I’ll start to post about buzzwords. After some months of fighting against it I’ve finally understood that there is no point in teaching people that <abbr title='Asynchronous Javascript and XML'>AJAX</abbr>, Web 2.0 and the like are just silly buzzwords about quite old technologies. So from now on I’ll get into the bandwagon and start using those buzzwords.</p>

<p>Getting into the stuff that matters, lets start with the basics. As you should already know, the web works on top of the HTTP protocol, which by design is based on a request-response paradigm. It’s a proven design which works like a charm for the typical web, where static pages are loaded from an URL, however the Web is evolving to a new kind of pages. The current trend is to make web pages which act like the typical thin client, where the bulk of the operations and domain logic (model) is performed on the server but the application flow (controller) and display (view) is handled on the client side with the help of JavaScript and <abbr title='Document Object Model'>DOM</abbr>.</p>

<p>Looking at the whole picture, you’ll need perspective here, <abbr title='Asynchronous Javascript and XML'>AJAX</abbr> web pages are Web Service Brokers. This exposes a big problem, since we’re sill using server side software focussed (read optimized) on the traditional web, while the client side is moving to support the thin client paradigm. The main trouble here is the design concept of the web where each page is an atomic unit, so we need to take some considerations when developing ajaxified web pages if we don’t want to hurt performance seriously.</p>

<p>Most <abbr title='Asynchronous Javascript and XML'>AJAX</abbr> frameworks expose some simple examples to demonstrate their functionality. They work ok, they do quite cool things, but looking at them a bit closer there are some grey areas. Besides the popular live-search, update on checkbox click or the plain spellchecker, there is a lot more functionality promised by the AJAX hype. Take for example a datagrid widget, like an Excel spreadsheet, there are some complex processes running on the background when working with it. When editting a cell we need to send the new value to the server, check if it worked ok and fetch any other updates on calculated cells which could have been affected by that change. So we have several weak points (mainly by the inherent network unreliability) which would need checks. In the previous example of the datagrid, imagine that the fetch of the affected cells fails, the application state on the client side and on the server side will be different and this is a major concern when working with thin clients.</p>

<p>To solve this problem we have to use transactions (already popular on the <abbr title='Relational Database Management System'>RDBMS</abbr> world). Transactions will allow us to emulate the web principle that each page/action is atomic. In the case that something goes wrong we can rollback the changes and our application state will be kept the same on both sides.</p>

<p>Extending on this idea, we can even optimize the request-response cycle by using an Unit of Work pattern for example. We compose a list of actions and send it when finished to the server instead of sending individual actions. Network latency is always an issue and the asynchronous nature of <abbr title='Asynchronous Javascript and XML'>AJAX</abbr> is not used too often in practice, when we make a change we expect an inmediate update. By packing the actions in Units of Work we can optimize the client-server interaction and support transactions quite easily.</p>

<p>Remember that for the tipical <abbr title='Remote Procedure Call'>RPC</abbr> the web server needs to spawn (or fork) a new process, load the dynamic language interpretter, parse thousends of lines of code, perform a DB connection and do the actual work. Even when having a properly setup backend (opcode cache, fast-cgi), the overhead of a RPC is huge. Packing actions together seems like a great solution for performance problems.</p>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 

  <div class="entry">
  <h2>
    
    <a href="/blog/como-escribir-numeros">Como escribir números</a>
    
  </h2>
   
  <div class="entry-meta">
    Jul 07, 2006
    — Filled in Technology
    

    <a class="entry-comments" href="/blog/como-escribir-numeros/#disqus_thread"></a>
  </div>
   
  <div class="entry-content">
    
        <p>Vaya por delante que el tema no está demasiado estandarizado a nivel internacional. Lo que realmente supone un problema a la hora de interpretar números en un mundo globalizado como el actual.</p>

<p>Una cosa si que hay en común, según el Sistema Internacional, no se deben separar los millares, en el caso de que haya de hacerse para mejorar su lectura, se hará mediante el uso de un espacio de no rotura, que viene a ser un poco más estrecho que un espacio normal. Este espacio puede introducirse en un editor de textos como Microsoft Word mediante la combinación Ctrl+Shift+Espacio (Ctrl+Espacio para OpenOffice). El código unicode es U+00A0 y en HTML es el conocido &amp;nbsp.</p>

<p>Para los decimales la cosa es algo más complicada. Hay dos grandes zonas geográficas con dos estilos distintos. La notación anglosajona usa un punto, mientras que en la mayoria del resto de paises se usa la coma.</p>

<p>Así pues todas las siguientes formas son correctas:</p>

<ul>
<li>123456.78</li>

<li>123 456.78</li>

<li>123456,78</li>

<li>123 456,78</li>
</ul>

<p>A la hora de implementar una aplicación, donde se deben introducir números, lo mejor es soportar todos los formatos en la entrada de información y normalizarlos a la hora de operar con ellos. Si nuestra aplicación solo operará en una región, podemos limitarnos al uso de ese formato específico, aunque hoy en día, y especialmente en apliaciones web, nunca es bueno suponer que solo será usada en una región límitada.</p>
    
  </div>
   
  <div class="entry-footer">
  </div>
</div>
 




  <div id="pagination">
    
      <a class="prev" href="/page8/">&laquo; Newer</a>
    
  
    
      
        <a class="num" href="/">1</a>
      
    
      
        <a class="num" href="/page2/">2</a>
      
    
      
        <a class="num" href="/page3/">3</a>
      
    
      
        <a class="num" href="/page4/">4</a>
      
    
      
        <a class="num" href="/page5/">5</a>
      
    
      
        <a class="num" href="/page6/">6</a>
      
    
      
        <a class="num" href="/page7/">7</a>
      
    
      
        <a class="num" href="/page8/">8</a>
      
    
      
        <span class="num">9</span>
      
    
      
        <a class="num" href="/page10/">10</a>
      
    
      
        <a class="num" href="/page11/">11</a>
      
    
      
        <a class="num" href="/page12/">12</a>
      
    
  
    
      <a class="next" href="/page10/">Older &raquo;</a>
    
  </div>



      </div>       
    </div>
     
    <div id="footer">
      <div id="about">
        
        <p>Content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/">Creative Commons Attribution 2.5</a> unless stated otherwise.
</p>
        
        <p>The opinions of authors expressed herein are those of the author and do not necessarily state or reflect those of the site owner.
</p>
        
      </div>
      <div id="copyright">
        
        <p>&copy; Copyright 2004-2010 Iván -DrSlump- Montes</p>
        
        <p>Design based on <a href="http://dezinerfolio.com/demo/darkelegance">Dark Elegance</a> by <a href="http://dezinerfolio.com">Dezinerfolio</a>
</p>
        
        <p>Published with <a href="http://jekyllrb.com">Jekyll</a></p>
        
      </div>
    </div>
     
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    
     
    

    <script type="text/javascript" src="/resources/AjaxUpload.js"></script>
    <script type="text/javascript">
        new AjaxUpload('upload', {
          // Location of the server-side upload script
          action: 'upload.php',
          // File upload name
          name: 'logofile',
          // Submit file after selection
          autoSubmit: true,
          // Fired before the file is uploaded
          onSubmit: function(file, extension) {
            if (!extension || !/^(gif|png|jpe?g)$/i.test(extension)) {
              alert('Error: invalid file extension');
              return false;
            }
          },
          // Fired when file upload is completed
          // WARNING! DO NOT USE "FALSE" STRING AS A RESPONSE!
          // @param file basename of uploaded file
          // @param response server response
          onComplete: function(file, response) {
            if (response) {
              alert('Error uploading image. Please try again.');
            } else {
              $('#header').empty().each(function(){
                this.style.background = 'url("/uploads/' + file + '") no-repeat center top';
              });
            }
          }
        });
    </script>


    <!-- Disqus number of comments -->
    <script type="text/javascript" defer="defer">
      (function(){
        var links = document.getElementsByTagName('a');
        var query = '?';
        for (var i=0; i<links.length; i++){
          if (links[i].href.indexOf('#disqus_thread') >= 0){
            query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
          }
        }
        document.write('<script defer="defer" charset="utf-8" type="text/javascript" src="http://disqus.com/forums/pollinimini/get_num_replies.js' + query + '"></' + 'script>');
      })();
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-580032-2");
      pageTracker._trackPageview();
    } catch(err) {}
    </script>
    
  </body>
</html>
